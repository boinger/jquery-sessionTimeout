(function(c){jQuery.sessionTimeout=function(h){function e(a){switch(a){case "start":k=setTimeout(function(){c("#sessionTimeout-dialog").dialog("open");f("start")},b.warnAfter);break;case "stop":clearTimeout(k)}}function f(a){switch(a){case "start":l=setTimeout(function(){eval(b.timeoutAction)},b.redirAfter-b.warnAfter);break;case "stop":clearTimeout(l)}}function p(a,g,m){var d=new RegExp("([?|&])"+g+"=.*?(&|#|$)","i");if(a.match(d))return a.replace(d,"$1"+g+"="+m+"$2");d="";-1!==a.indexOf("#")&&(d=
a.replace(/.*#/,"#"),a=a.replace(/#.*/,""));var q=-1!==a.indexOf("?")?"&":"?";return a+q+g+"="+m+d}var n={message:"Your session is about to expire.",keepAliveUrl:"/keep-alive",keepAliveAjaxRequestType:"POST",logoutClickAction:'logout("clicked")',timeoutAction:'logout("timeout")',preLogoutUrl:"/prelogout",logoutUrl:"/logout?logoutreason=",warnAfter:9E5,redirAfter:12E5,appendTime:!0},b=n,k,l;h&&(b=c.extend(n,h));c("body").append('<div title="Session Timeout" id="sessionTimeout-dialog">'+b.message+"</div>");
c("#sessionTimeout-dialog").dialog({autoOpen:!1,width:400,modal:!0,closeOnEscape:!1,open:function(){c(".ui-dialog-titlebar-close").hide()},buttons:{"Log Out Now":function(){eval(b.logoutClickAction)},"Stay Connected":function(){c(this).dialog("close");c.ajax({type:b.keepAliveAjaxRequestType,url:b.appendTime?p(b.keepAliveUrl,"_",(new Date).getTime()):b.keepAliveUrl});f("stop");e("start")}}});c(document).ajaxComplete(function(){c("#sessionTimeout-dialog").dialog("isOpen")||(f("stop"),e("stop"),e("start"))});
e("start")}})(jQuery);